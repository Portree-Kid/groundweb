<html>
<style type="text/css">

iframe {
width: 300px;
height: 100px;
}

</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
  function checkStatus() {
    var iFrameDoc =  $( "[name='status']" )[0].contentDocument ||  $( "[name='status']" )[0].contentWindow.document;
    iFrameDoc.write('Checking Azure');
    iFrameDoc.close(); 

      var myButton = $( "[name='myButton']" )[0];
    myButton.disabled = true;
    $.getJSON('groundnets/status', function(data) {
      if( data.status === 'OK') {
        $( "[name='myButton']" )[0].disabled = false;
      }
      var iFrameDoc =  $( "[name='status']" )[0].contentDocument ||  $( "[name='status']" )[0].contentWindow.document;
      iFrameDoc.write('Azure : ' + data.status);
      iFrameDoc.close(); 
      console.log(data.status);
  });
}
</script>

<body onload="checkStatus()">
  <form id="request_form" method="post" enctype="multipart/form-data" action="groundnets/upload" target="result" onsubmit="myButton.disabled = true;" >
    <label>Email (not checked but used for commit) </label> 
    <input name="user_email" type="text"/>  <BR>
    <label>I agree to release my content under the GPL v2 </label> <input name="gpl" type="checkbox"/>    
    <br>
    <label>Your groundnet file (groundnet/rwyuse)
      <input name="groundnet" type="file" size="50" accept="text/*"> 
    </label><BR>  
    <button name="myButton">Upload</button>
  </form>
  <!--<a href="/main/Airports/">Uploaded content &#40; TerraSync compatible &#41;</a><br>-->
  <iframe name="status" frameBorder="0"></iframe>
  <iframe name="result" frameBorder="0"></iframe>  
</body>

</html>